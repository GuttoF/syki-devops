<MudForm>
    <MudStack Row="true">
        <MudItem xs="12">
            <MudSelect
                Dense="true" Margin="Margin.Dense"
                Variant="Variant.Outlined"
                Value="@_oferta"
                ValueChanged="(TurmaOfertaFull newValue) => HandleOFertaChanged(newValue)"
                Label="Oferta"
                Required="true" RequiredError="Informe a oferta!" AdornmentColor="Color.Primary"
            >
                @foreach (TurmaOfertaFull? item in Ofertas)
                {
                    if (item.IsSelected && item.Id != _oferta?.Id) continue;
                    <MudSelectItem Value="@item">@item.Campus | @item.Periodo | @item.Turno.GetDescription() | @item.Curso | @item.Grade</MudSelectItem>
                }
                @if (Disciplina == null)
                {
                    <MudSelectItem Value="@_oferta" Disabled="true">Selecione a disciplina!</MudSelectItem>
                }
                @if (Disciplina != null && Ofertas.Count == 0)
                {
                    <MudSelectItem Value="@_oferta" Disabled="true">Esta disciplina n√£o possui ofertas vinculadas.</MudSelectItem>
                }
            </MudSelect>
        </MudItem>
    </MudStack>
</MudForm>

@code {
    [CascadingParameter(Name = "Ofertas")]
    public List<TurmaOfertaFull> Ofertas { get; set; }

    [CascadingParameter(Name = "Disciplina")]
    public DisciplinaOut? Disciplina { get; set; }

    TurmaOfertaFull? _oferta;

    void HandleOFertaChanged(TurmaOfertaFull newValue)
    {
        if (_oferta != null)
        {
            Ofertas.First(d => d.Id == _oferta.Id).IsSelected = false;
        }

        Ofertas.First(d => d.Id == newValue.Id).IsSelected = true;
        _oferta = Ofertas.First(d => d.Id == newValue.Id);
    }
}
