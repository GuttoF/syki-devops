@using Syki.Front.Components.Agenda

@namespace Syki.Front.Pages.Teacher

@page "/teacher/agenda"
@attribute [Authorize(Roles = "Teacher")]

<SykiPageTitle Title="Agenda" />

<MudContainer Class="my-4 px-4">
    <SykiPageHeader Icon="@Icons.Material.Filled.CalendarMonth" Title="Agenda" Class="mb-4" />
    @if (_loading)
    {
        <MudContainer Class="px-0">
            <MudCard>
                <MudCardContent>
                    <MudProgressLinear Color="Color.Info" Indeterminate="true" />
                </MudCardContent>
            </MudCard>
        </MudContainer>
    }
    else
    {
        <CascadingValue Name="Days" Value="@Days">
            <WeeklyAgenda Class="px-0" />
        </CascadingValue>
    }
</MudContainer>

@inject GetTeacherAgendaClient Client

@code
{
    private bool _loading;
    private List<AgendaDayOut> Days = [];
    
    protected override async Task OnInitializedAsync()
    {
        _loading = true;
        Days = await Client.Get();
        _loading = false;
    }
}
