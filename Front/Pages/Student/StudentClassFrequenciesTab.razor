@using Syki.Front.Components.Summaries

@namespace Syki.Front.Pages.Student

<MudContainer Class="my-4 px-0">
    <MudGrid Spacing="2">
        <MudItem xs="12" sm="6" md="4" lg="4">
            <SummaryTextCard Loading="@_loading" Icon="@Icons.Material.Filled.CheckCircleOutline" Color="Color.Success" Text="Presenças" Value="@_frequency.Presences.ToThousandSeparated()"/>
        </MudItem>
        <MudItem xs="12" sm="6" md="4" lg="4">
            <SummaryTextCard Loading="@_loading" Icon="@Icons.Material.Filled.Cancel" Color="Color.Error" Text="Faltas" Value="@_frequency.Absences.ToThousandSeparated()"/>
        </MudItem>
        <MudItem xs="12" sm="6" md="4" lg="4">
            <SummaryTextCard Loading="@_loading" Icon="@Icons.Material.Filled.BookmarkAdded" Color="Color.Info" Text="Aulas realizadas" Value="@_frequency.GetLessonsAsFraction()"/>
        </MudItem>
    </MudGrid>
</MudContainer>

<MudContainer Class="my-4 px-0">
    <MudPaper Class="px-4 pt-4">

    </MudPaper>
</MudContainer>

@inject NavigationManager Nav
@inject GetStudentClassFrequencyClient GetStudentClassFrequencyClient

@code
{
	[Parameter]
	public Guid ClassId { get; set; }

    private bool _loading;
    private GetStudentClassFrequencyOut _frequency = new();

    protected override async Task OnParametersSetAsync()
    {
        _loading = true;
        _frequency = await GetStudentClassFrequencyClient.Get(ClassId);
        _loading = false;
    }
}
