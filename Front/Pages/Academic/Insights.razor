@using Syki.Front.Components.Indexes
@using Syki.Front.Features.Academic.GetAcademicInsights

@namespace Syki.Front.Pages.Academic

@page "/academic/insights"
@attribute [Authorize(Roles = "Academic")]

<PageTitle>Insights</PageTitle>

<MudContainer Class="mt-8 px-12">
    <MudText Typo="Typo.h4" Style="font-weight: bold" Class="ml-4">
        <MudIcon Icon="@Icons.Material.Filled.Insights" Class="mr-1 mb-n1" Size="Size.Large"/>
        Insights
    </MudText>
    <MudAlert Class="mt-4" Severity="Severity.Normal" Variant="Variant.Text" Elevation="1">
        <MudStack Row="true" Justify="Justify.SpaceAround">
            <MudText>Aqui você encontra dados consolidados sobre a sua instituição, atualizados em tempo real!</MudText>
        </MudStack>
    </MudAlert>
    <MudGrid Class="mt-4">
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.GroupWork" Value="@_data.Campus" Text="Campus" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.Class" Value="@_data.Courses" Text="Cursos" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.Apps" Value="@_data.Disciplines" Text="Disciplines" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.AccountTree" Value="@_data.CourseCurriculums" Text="Grades" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.PlaylistAddCheck" Value="@_data.CourseOfferings" Text="Ofertas" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.CenterFocusStrong" Value="@_data.Classes" Text="Turmas" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.Person4" Value="@_data.Teachers" Text="Professores" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.People" Value="@_data.Students" Text="Alunos" />
        <IndexCard Loading="@_loading" Icon="@Icons.Material.Filled.NotificationsNone" Value="@_data.Notifications" Text="Notificações" />
    </MudGrid>
</MudContainer>

@inject GetAcademicInsightsClient Client

@code
{
    private bool _loading;
    private AcademicInsightsOut _data = new();

    protected override async Task OnInitializedAsync()
    {
        _loading = true;
        _data = await Client.Get();
        _loading = false;
    }
}
