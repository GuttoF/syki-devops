@namespace Syki.Front.Pages.Student

@page "/student/classes/{id:guid}"
@attribute [Authorize(Roles = "Student")]

<SykiPageTitle Title="Turma" />

<MudContainer Class="my-4 px-4">
    <MudGrid>
        <MudItem xs="12" sm="8" md="8" lg="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudIcon Icon="@Icons.Material.Filled.CenterFocusStrong" Class="mb-1" Size="Size.Large"/>
                <MudText Typo="Typo.h5" Style="font-weight: bold">@_class.Discipline</MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="12" sm="4" md="4" lg="4" Class="d-flex justify-end">
            <MudChip
                T="string"
                Class="px-5 ma-0"
                Size="Size.Large"
                Icon="@_class.GetIcon()"
                Color="@_class.GetColor()"
                IconColor="Color.Default"
            >
                <b>Média: @_class.Average.Format()</b>
            </MudChip>
        </MudItem>
    </MudGrid>

    <StudentClassActivitiesTab ClassId="@Id" />
</MudContainer>

@inject GetStudentClassClient GetStudentClassClient

@code
{
	[Parameter]
	public Guid Id { get; set; }

    private bool _loading;
    private StudentClassOut _class = new();

    protected override async Task OnParametersSetAsync()
    {
        _loading = true;
        _class = await GetStudentClassClient.Get(Id);
        _loading = false;
    }
}
