@page "/login-oauth"

<PageTitle>Login OAuth</PageTitle>

<MudContainer Class="mt-16 mb-8" Style="width: 460px">
    <MudOverlay @bind-Visible="@_loading" LightBackground="true" Absolute="false">
        <MudProgressCircular Color="Color.Info" Indeterminate="true" Size="Size.Large" />
    </MudOverlay>
</MudContainer>

@inject NavigationManager Nav
@inject AuthService AuthService

@code
{
    private bool _loading = true;
    [Parameter]
    [SupplyParameterFromQuery]
    public string? Token { get; set; }

    protected override async Task OnInitializedAsync()
    {
        _loading = true;
        if (Token != null)
        {
            await AuthService.LoginOAuth(Token);
        }
        Nav.NavigateTo("/");
        _loading = false;
    }
}
