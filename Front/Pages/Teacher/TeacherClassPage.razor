@namespace Syki.Front.Pages.Teacher

@page "/teacher/classes/{id:guid}"
@attribute [Authorize(Roles = "Teacher")]

<PageTitle>Turma</PageTitle>

<MudContainer>
    <MudCard Class="mt-8 mb-4 mx-6 px-2">
        <MudCardContent>
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudIcon Icon="@Icons.Material.Filled.CenterFocusStrong" Class="mr-1 mb-1" Size="Size.Large"/>
                <MudText Typo="Typo.h5" Style="font-weight: bold">@($"{_class.Discipline} - {_class.Period}")</MudText>
                <MudSpacer />
                <MudTabs Elevation="0" Rounded="true" Outlined="true" @bind-ActivePanelIndex="@_index" MinimumTabWidth="120px">
                    <MudTabPanel Text="Frequência" ID='"panel_0"'></MudTabPanel>
                    <MudTabPanel Text="Diário" ID='"panel_1"'></MudTabPanel>
                    <MudTabPanel Text="Notas" ID='"panel_2"'></MudTabPanel>
                </MudTabs>
            </MudStack>
        </MudCardContent>
    </MudCard>

    @if (_index == 0)
    {
        <TeacherClassFrequencyTab ClassId="@Id" />
    }
    else if (_index == 1)
    {
        <MudContainer Class="mb-8">
            <MudStack Row="true" Class="mt-4" Justify="Justify.Center">
                <MudText Typo="Typo.h1">Diário</MudText>
            </MudStack>
        </MudContainer>
    }
    else
    {
        <TeacherClassNotesTab ClassId="@Id" />
    }
</MudContainer>

@inject GetTeacherClassClient GetTeacherClassClient

@code
{
	[Parameter]
	public Guid Id { get; set; }

    private int _index;
    private TeacherClassOut _class = new();

    protected override async Task OnInitializedAsync()
    {
        _class = await GetTeacherClassClient.Get(Id);
    }
}
