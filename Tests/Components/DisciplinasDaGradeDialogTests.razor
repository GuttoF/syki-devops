@inherits BunitTestContext

@code
{
    [Test]
    public async Task Should_renders_correctly()
    {
        // Arrange
        Services.AddMudServices();
        TestContext!.JSInterop.SetupVoid("mudPopover.initialize", _ => true);
        TestContext!.JSInterop.SetupVoid("mudElementRef.saveFocus", _ => true);
        TestContext!.JSInterop.SetupVoid("mudScrollManager.lockScroll", _ => true);
        var dialogService = Services.GetService<IDialogService>()!;

        const string grade = "Grade de ADS - 1.0";

        var disciplinas = new List<DisciplinaOut>
        {
            new DisciplinaOut { Nome = "Matemática Discreta", Periodo = 1, Creditos = 6, CargaHoraria = 60, },
            new DisciplinaOut { Nome = "Introdução à Redes de Computadores", Periodo = 5, Creditos = 4, CargaHoraria = 50, },
            new DisciplinaOut { Nome = "Pensamento Computacional e Algoritmos", Periodo = 3, Creditos = 7, CargaHoraria = 25, },
            new DisciplinaOut { Nome = "Design de Interação Humano-Máquina", Periodo = 2, Creditos = 6, CargaHoraria = 90, },
            new DisciplinaOut { Nome = "Projeto Integrador I: Concepção e Prototipação", Periodo = 4, Creditos = 6, CargaHoraria = 60, },
        };

        var parameters = new DialogParameters<DisciplinasDaGradeDialog>();
        parameters.Add(x => x.Disciplinas, disciplinas);

        var dialog = await dialogService.ShowAsync<DisciplinasDaGradeDialog>(grade, parameters);

        // Act
        var cut = Render(dialog.RenderFragment);

        // Assert
        cut.Find("h6").MarkupMatches(
            @<h6 class="mud-typography mud-typography-h6">
                <svg class="mud-icon-root mud-svg-icon mud-icon-size-medium mr-1 mb-n1" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"></path>
                </svg>
                @grade
            </h6>
        );
    }
}
